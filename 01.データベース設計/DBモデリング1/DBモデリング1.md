## 課題1

### DBスキーマ設計
![ER図](./ER%E5%9B%B3.png)

以下、各テーブルの管理する項目を記載する
1. 注文種別(OrderType)
  + 注文種別Noをプライマリキーとして、注文の種別を管理するテーブル。現在は[セットメニュー]か[お好みすし]のどちらかを管理する。このテーブルを作成することで、将来的な注文種別の追加(ex.ドリンク等)にも対応できるようにした。
2. 商品マスタ(Product)
  + 商品Noをプライマリキーとして、商品の一覧を管理するテーブル。このテーブルを作成することで、商品の追加にも対応できるようにした。
3. 商品種類(ProductType)
  + 商品種類Noをプライマリキーとして、全商品のカテゴリ一覧を管理するテーブルを作成した。このテーブルを作成することで、にぎりとは違うカテゴリの販売時(ex.うどんやそばなどの販売)にも対応できるようにした。
4. 値段(Price)
  + 商品マスタテーブルの商品Noを外部キーとして、各商品の値段を管理する。商品の値段の変更時にはこのテーブルの値段を修正すれば対応できる。
5. 顧客(Customer)
  + 顧客Noをプライマリキーとして、お持ち帰りメニューを注文する顧客の情報を管理する。電話番号や支払い済みかどうかを管理する。
6. 注文詳細(OrderDetails)
  + 注文Noをプライマリキーとして、顧客からの注文を管理するテーブル。各注文と顧客Noを紐付け、どの顧客がどの注文をしたかを管理する。
7. 注文履歴(OrderHistory)
  + 注文Noを外部キーとして注文された日時を管理する。

#### 物理モデルと論理モデルの違いについて
+ 論理モデル
  論理モデルは概念モデルをリレーショナルデータモデルで取り扱いやすいように詳細化したモデルのこと。
  (概念モデルとは、管理すべき情報（エンティティと属性）とそれらの関係が整理された抽象的なモデル」のこと)
  論理モデルでは、どのようなテーブルを作り、どのような列を設ければ、RDBに落とし込みやすいかを考える。業務に沿ってデータの洗い出しを行い、各スキーマの関係を記載後、データを正規化する。
  上記整理した情報をER図で表現します。
+ 物理モデル
   論理モデルをテーブルに落とし込むためにさらに詳細に表したモデルであり、データベースの情報と1対1の対応をしている。物理モデルは、「テーブル設計仕様書」や「DDL（Data Definition Language）スクリプト」として表現されます。


## 課題2
#### 仕様変更について
- OrderDetailsテーブルへシャリフラグを追加し、注文時点でシャリのサイズを記録する。通常サイズであれば0、大であれば1、小であれば2というようにフラグ化することで、様々なシャリの大きさに対応する。
- OrderHistoryテーブルを作成し、各月でgroupbyすることによって、商品マスタに登録されている商品が過去どれぐらい注文されているかを集計することができる。課題4にて、本ユースケースの集計を実行するクエリを記載する。

## 課題3
#### 追加仕様について
- しゃりは大きさだけでなく、しゃり自体の種類がネタによって変更されることがある。具体的には、すし酢を使う場合と赤酢を使使う場合である。本件に対応する為、ricekind_flagを作成。0であればすし酢、1であれば赤酢であり、今後新たな酢飯の種類にも対応できるようにした。

## 課題4
#### ユースケースを想定したクエリ
+ mysql on docker
+ コマンド
```
docker run --name mysql01 -e MYSQL_ROOT_PASSWORD=root -p 3306:3306 -d mysql:latest
docker exec -it mysql01 /usr/bin/mysql -u root -p
```
```
CREATE DATABASE sushi
```
- 参考サイト
https://blackbird-blog.com/docker-mysql01#:~:text=MySQL%E3%82%B3%E3%83%B3%E3%83%86%E3%83%8A%E8%B5%B7%E5%8B%95,-%E3%81%BE%E3%81%9A%E3%81%AF%E3%80%81%E5%BF%85%E8%A6%81%E6%9C%80%E4%BD%8E&text=docker%20run%20%E3%81%A7%E3%82%B3%E3%83%B3%E3%83%86%E3%83%8A%E3%82%92,%E3%82%B3%E3%83%B3%E3%83%86%E3%83%8A%E3%82%92%E8%B5%B7%E5%8B%95%E3%81%97%E3%81%BE%E3%81%99%E3%80%82&text=Windows%E3%81%AE%E3%83%95%E3%82%A9%E3%82%A4%E3%82%A2%E3%82%A6%E3%82%A9%E3%83%BC%E3%83%AB%E3%81%8C,%E3%82%92%E8%A8%B1%E5%8F%AF%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%E3%80%82



# memo
- 設計方法
  + トップダウン
    + 要件定義からデータを抽出していく
    + メリット
      + システム全体を描くのに適している
    + デメリット
      + 項目をもれなく見つけるのが難しい
      + 作り手によって質が変わる→作り手が業務を理解している可能性がある
  + ボトムアップ
    + 画面とか帳票とかからデータ項目を洗い出す
      + メリット
        + 現行の業務をシステム化しやすい
      + デメリット
        + あるべき姿を見失う可能性がある
  + 折衷方式
    + トップダウンとボトムアップを両方取り入れていく

### 参考図書
+ 達人に学ぶDB設計